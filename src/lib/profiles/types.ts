// src/lib/profiles/types.ts  /**  * Available field types for profile forms  */ export type FieldType =    | 'material_selector'      // Dropdown with material options (OPAL, ALU, etc.)   | 'thickness_selector'     // Numeric input for material thickness   | 'color_ral'             // RAL color system selector with visual preview   | 'color_pantone'         // PANTONE color system selector   | 'color_oracal'          // ORACAL film color selector   | 'color_hex'             // Custom HEX color picker   | 'dimension_input'       // Numeric input with unit (mm, cm, m)   | 'text_input'            // Standard text input   | 'textarea'              // Multi-line text input   | 'checkbox'              // Single checkbox toggle   | 'toggle'                // Switch toggle   | 'multi_select_chips'    // Multiple selection with chip UI   | 'dropdown'              // Single select dropdown   | 'numeric_input'         // Number input with step controls   | 'date_input'            // Date picker   | 'icon_selector'         // Icon selection from library   | 'file_upload';          // File upload field  /**  * Conditional logic rule for showing/hiding fields  */ export interface ConditionalRule {   field_key: string;   operator: 'equals' | 'not_equals' | 'contains' | 'greater_than' | 'less_than' | 'in' | 'not_in';   value: any;   action: 'show' | 'hide' | 'require' | 'disable' | 'enable'; }  /**  * Validation rule for field values  */ export interface ValidationRule {   type: 'required' | 'min' | 'max' | 'pattern' | 'custom' | 'minLength' | 'maxLength';   value?: any;   message?: string;   customValidator?: (value: any) => boolean; }  /**  * Localized text object for multi-language support  */ export interface LocalizedText {   en: string;   ru: string;   lv: string; }  /**  * Profile template definition (e.g., P7st, P1)  */ export interface ProfileTemplate {   id: number;   code: string;                    // P7st, P1, etc.   name: string;   version: number;   isActive: boolean;   sections: ProfileSection[];   metadata?: {     icon?: string;     description?: LocalizedText;     category?: string;     manufacturingTime?: number;    // Estimated hours   };   createdAt?: string;   createdBy?: string; }  /**  * Section within a profile (e.g., LINE_FREEZER, BENDER)  */ export interface ProfileSection {   id: number;   name: string;                     // LINE_FREEZER, BENDER, etc.   displayName: LocalizedText;   icon?: string;   orderIndex: number;   fields: ProfileField[];   isCollapsible?: boolean;   isRequired?: boolean; }  /**  * Individual field within a section  */ export interface ProfileField {   id: number;   fieldKey: string;                 // Unique within section   fieldType: FieldType;   label: LocalizedText;   placeholder?: LocalizedText;   helpText?: LocalizedText;   isRequired: boolean;   defaultValue?: any;   options?: any[];                  // For dropdowns, multi-select   conditionalLogic?: ConditionalRule[];   validationRules?: ValidationRule[];   orderIndex: number;   config?: FieldConfig; }  /**  * Field-specific configuration options  */ export interface FieldConfig {   // For dimension_input   unit?: string;                    // mm, cm, m   step?: number;                    // Increment step   min?: number;   max?: number;      // For color selectors   showPreview?: boolean;   previewSize?: 'sm' | 'md' | 'lg';      // For multi_select_chips   maxSelections?: number;      // For file_upload   acceptedTypes?: string[];         // ['.pdf', '.cdr', '.jpg']   maxSizeBytes?: number;      // General   width?: string;                   // CSS width   disabled?: boolean;   readonly?: boolean; }  /**  * Material definition in the library  */ export interface Material {   id: number;   category: string;                 // ALU, OPAL, PVC, FILM   code: string;                     // ALU_1_3, OPAL_WHITE   name: LocalizedText;   thicknessOptions: number[];       // [1.3, 1.5, 2.0]   metadata?: {     density?: number;     supplier?: string;     cost?: number;     color?: string;                 // Hex color for visual   }; }  /**  * Color system entry (RAL, PANTONE, ORACAL)  */ export interface ColorSystem {   id: number;   systemType: 'RAL' | 'PANTONE' | 'ORACAL' | 'HEX';   code: string;                     // RAL 9005, PANTONE 186C   name: string;   hexValue: string;                 // #0A0A0A   rgb: { r: number; g: number; b: number };   cmyk?: { c: number; m: number; y: number; k: number };   finish?: 'matte' | 'gloss' | 'metallic' | 'satin'; }  /**  * File reference for uploaded files  */ export interface FileReference {   id: number;   filename: string;   originalName: string;   mimeType: string;   sizeBytes: number;   storagePath: string;   uploadedBy: string;   uploadedAt: string;   url?: string;                     // Public URL for access   metadata?: {     width?: number;     height?: number;     pages?: number;                 // For PDFs   }; }  /**  * Draft order containing multiple profiles  */ export interface DraftOrder {   id: number;   poNumber: string;                 // PO-XXXX   client: string;   title: string;   dueDate: string;                  // ISO date   loadingDate?: string;             // ISO date   cdrFile?: FileReference;   pdfFile?: FileReference;   profiles: OrderProfile[];   notes?: string;   status: 'draft' | 'pending' | 'approved' | 'in_production';   createdBy: string;   createdAt: string;   updatedAt: string; }  /**  * Single profile instance within an order  */ export interface OrderProfile {   id: number;   profileTemplateId: number;   profileTemplate?: ProfileTemplate; // Populated on load   quantity: 1 | 2 | 3 | 4;   configuration: ProfileConfiguration;   notes?: string;   orderIndex: number; }  /**  * Profile configuration values (field_key -> value)  */ export interface ProfileConfiguration {   [sectionName: string]: {     [fieldKey: string]: any;   }; }  /**  * FAQ document for profile documentation  */ export interface FAQDocument {   id: number;   profileTemplateId?: number;   title: LocalizedText;   content: LocalizedText;   category: string;   tags: string[];   attachments?: FileReference[];   orderIndex: number;   isPublished: boolean;   createdAt: string;   updatedAt: string; }  /**  * Profile version history entry  */ export interface ProfileVersionHistory {   id: number;   profileTemplateId: number;   version: number;   changes: any;   changedBy: string;   changedAt: string;   changeDescription: string; }
